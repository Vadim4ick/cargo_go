basePath: /api/v1
definitions:
  auth.ErrorResponse:
    properties:
      data: {}
      message:
        example: Некорректные данные
        type: string
    type: object
  auth.LoginRequest:
    properties:
      email:
        example: firulvv@mail.ru
        type: string
      password:
        example: "123456"
        type: string
    type: object
  auth.LoginResponse:
    properties:
      data:
        additionalProperties:
          type: string
        type: object
      message:
        example: Пользователь успешно авторизован
        type: string
    type: object
  auth.LogoutResponse:
    properties:
      message:
        example: Успешный выход из системы
        type: string
    type: object
  auth.OnlineListResponse:
    properties:
      data:
        items:
          type: string
        type: array
      message:
        example: Список ID-шников онлайн пользователей
        type: string
    type: object
  auth.ProfileResponse:
    properties:
      data:
        $ref: '#/definitions/user.User'
      message:
        example: Данные о пользователе
        type: string
    type: object
  auth.RefreshResponse:
    properties:
      data:
        additionalProperties:
          type: string
        type: object
      message:
        example: Токен успешно обновлён
        type: string
    type: object
  auth.RegisterRequest:
    properties:
      email:
        example: firulvv@mail.ru
        type: string
      inviteToken:
        example: token
        type: string
      password:
        example: "123456"
        type: string
    type: object
  auth.RegisterResponse:
    properties:
      data:
        $ref: '#/definitions/user.User'
      message:
        example: Пользователь успешно зарегистрирован
        type: string
    type: object
  cargo.Cargo:
    properties:
      cargoNumber:
        type: string
      cargoPhotos:
        items:
          $ref: '#/definitions/cargo.CargoPhoto'
        type: array
      createdAt:
        type: string
      date:
        type: string
      driver:
        type: string
      id:
        type: string
      loadUnloadDate:
        type: string
      paymentStatus:
        type: string
      payoutAmount:
        type: number
      payoutDate:
        type: string
      payoutTerms:
        type: string
      transportationInfo:
        type: string
      truckId:
        type: string
    required:
    - cargoNumber
    - driver
    - transportationInfo
    - truckId
    type: object
  cargo.CargoPhoto:
    properties:
      cargoId:
        type: string
      createdAt:
        type: string
      id:
        type: string
      url:
        type: string
    type: object
  cargo.CreateResponse:
    properties:
      data:
        $ref: '#/definitions/cargo.Cargo'
      message:
        example: Груз успешно создан
        type: string
    type: object
  cargo.DeleteResponse:
    properties:
      data: {}
      message:
        example: Груз успешно удалён
        type: string
    type: object
  cargo.ErrorResponse:
    properties:
      data: {}
      message:
        example: Невалидный формат JSON
        type: string
    type: object
  cargo.GetResponse:
    properties:
      data:
        $ref: '#/definitions/cargo.Cargo'
      message:
        example: Данные о грузе
        type: string
    type: object
  cargo.ListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/cargo.Cargo'
        type: array
      message:
        example: Список всех грузов
        type: string
    type: object
  invitation.CreateRequest:
    properties:
      email:
        example: firulvv@mail.ru
        type: string
    required:
    - email
    type: object
  invitation.CreateResponse:
    properties:
      data:
        type: string
      message:
        example: Приглашение успешно создано
        type: string
    type: object
  invitation.ErrorResponse:
    properties:
      data: {}
      message:
        example: Невалидный формат JSON
        type: string
    type: object
  truck.CreateRequest:
    properties:
      name:
        example: Машина
        type: string
    type: object
  truck.ErrorResponse:
    properties:
      data: {}
      message:
        example: Невалидный формат JSON
        type: string
    type: object
  truck.GetResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/truck.Truck'
        type: array
      message:
        example: Машина
        type: string
    type: object
  truck.ListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/truck.Truck'
        type: array
      message:
        example: Список всех машин
        type: string
    type: object
  truck.Truck:
    properties:
      createdAt:
        type: string
      id:
        type: string
      name:
        type: string
    type: object
  user.DeleteResponse:
    properties:
      data: {}
      message:
        example: Пользователь успешно удалён
        type: string
    type: object
  user.ErrorResponse:
    properties:
      data: {}
      message:
        example: Невалидный формат JSON
        type: string
    type: object
  user.GetResponse:
    properties:
      data:
        $ref: '#/definitions/user.User'
      message:
        example: Пользователь
        type: string
    type: object
  user.ListResponse:
    properties:
      data:
        items:
          $ref: '#/definitions/user.User'
        type: array
      message:
        example: Список пользователей
        type: string
    type: object
  user.Role:
    enum:
    - USER
    - EDITOR
    - SUPERADMIN
    type: string
    x-enum-varnames:
    - RoleUser
    - RoleEditor
    - RoleSuperAdmin
  user.UpdateRequest:
    properties:
      role:
        enum:
        - USER
        - EDITOR
        - SUPERADMIN
        example: USER
        type: string
      username:
        example: username
        minLength: 3
        type: string
    required:
    - role
    - username
    type: object
  user.UpdateResponse:
    properties:
      data:
        $ref: '#/definitions/user.User'
      message:
        example: Пользователь
        type: string
    type: object
  user.User:
    properties:
      createdAt:
        type: string
      email:
        type: string
      id:
        type: string
      password:
        minLength: 6
        type: string
      role:
        $ref: '#/definitions/user.Role'
      username:
        minLength: 3
        type: string
    required:
    - email
    - password
    - username
    type: object
host: localhost:8080
info:
  contact: {}
  description: This is the API for the Cargo Project
  title: Cargo Project API
  version: "1.0"
paths:
  /auth/login:
    post:
      consumes:
      - application/json
      description: Authenticates a user and returns access and refresh tokens
      parameters:
      - description: User credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/auth.LoginRequest'
      produces:
      - application/json
      responses:
        "200":
          description: User successfully authenticated
          schema:
            $ref: '#/definitions/auth.LoginResponse'
        "400":
          description: Invalid input
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
      summary: User login
      tags:
      - auth
  /auth/logout:
    post:
      consumes:
      - application/json
      description: Logs out a user and clears the refresh token cookie
      produces:
      - application/json
      responses:
        "200":
          description: User successfully logged out
          schema:
            $ref: '#/definitions/auth.LogoutResponse'
      summary: User logout
      tags:
      - auth
  /auth/online:
    get:
      consumes:
      - application/json
      description: Retrieves a list of user IDs who are currently online
      produces:
      - application/json
      responses:
        "200":
          description: List of online user IDs
          schema:
            $ref: '#/definitions/auth.OnlineListResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List online users
      tags:
      - auth
  /auth/refresh:
    post:
      consumes:
      - application/json
      description: Refreshes access token using refresh token stored in cookie
      produces:
      - application/json
      responses:
        "200":
          description: Token successfully refreshed
          schema:
            $ref: '#/definitions/auth.RefreshResponse'
        "401":
          description: Invalid or missing refresh token
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
      summary: Refresh access token
      tags:
      - auth
  /auth/register:
    post:
      consumes:
      - application/json
      description: Registers a new user with email and password
      parameters:
      - description: User credentials
        in: body
        name: credentials
        required: true
        schema:
          $ref: '#/definitions/auth.RegisterRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User successfully registered
          schema:
            $ref: '#/definitions/auth.RegisterResponse'
        "400":
          description: Invalid input
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
      summary: Register a new user
      tags:
      - auth
  /cargo:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all cargos in the system
      produces:
      - application/json
      responses:
        "200":
          description: List of cargos
          schema:
            $ref: '#/definitions/cargo.ListResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all cargos
      tags:
      - cargo
    post:
      consumes:
      - multipart/form-data
      description: Creates a new cargo with the provided details via form-data
      parameters:
      - description: Номер груза
        in: formData
        name: cargoNumber
        required: true
        type: string
      - description: Дата (RFC3339), например 2025-04-30T08:00:00Z
        in: formData
        name: date
        type: string
      - description: Дата погрузки/разгрузки (2025-04-30T08:00:00Z)
        in: formData
        name: loadUnloadDate
        type: string
      - description: Водитель
        in: formData
        name: driver
        required: true
        type: string
      - description: Информация о перевозке
        in: formData
        name: transportationInfo
        required: true
        type: string
      - description: Сумма выплаты, например 12345.67
        in: formData
        name: payoutAmount
        type: number
      - description: Дата выплаты (RFC3339)
        in: formData
        name: payoutDate
        type: string
      - description: Статус оплаты
        in: formData
        name: paymentStatus
        type: string
      - description: Условия выплаты
        in: formData
        name: payoutTerms
        type: string
      - description: ID машины (c8169351-f6d8-4058-af4a-8ead3363fd92)
        in: formData
        name: truckId
        required: true
        type: string
      - description: Фотографии груза (можно выбрать несколько файлов)
        in: formData
        name: photos
        type: file
      produces:
      - application/json
      responses:
        "201":
          description: Груз успешно создан
          schema:
            $ref: '#/definitions/cargo.CreateResponse'
        "400":
          description: Ошибки валидации или неверный формат данных
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
        "500":
          description: Внутренняя ошибка сервера
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new cargo
      tags:
      - cargo
  /cargo/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a cargo by its ID
      parameters:
      - description: Cargo ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Cargo deleted
          schema:
            $ref: '#/definitions/cargo.DeleteResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Delete a cargo by ID
      tags:
      - cargo
    get:
      consumes:
      - application/json
      description: Retrieves a cargo by its ID
      parameters:
      - description: Cargo ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: Cargo found
          schema:
            $ref: '#/definitions/cargo.GetResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get a cargo by ID
      tags:
      - cargo
    patch:
      consumes:
      - multipart/form-data
      description: Updates a cargo by its ID
      parameters:
      - description: Cargo ID
        in: path
        name: id
        required: true
        type: string
      - description: Номер груза
        in: formData
        name: cargoNumber
        type: string
      - description: Дата (RFC3339), например 2025-04-30T08:00:00Z
        in: formData
        name: date
        type: string
      - description: Дата погрузки/разгрузки (2025-04-30T08:00:00Z)
        in: formData
        name: loadUnloadDate
        type: string
      - description: Водитель
        in: formData
        name: driver
        type: string
      - description: Информация о перевозке
        in: formData
        name: transportationInfo
        type: string
      - description: Сумма выплаты, например 12345.67
        in: formData
        name: payoutAmount
        type: number
      - description: Дата выплаты (RFC3339)
        in: formData
        name: payoutDate
        type: string
      - description: Статус оплаты
        in: formData
        name: paymentStatus
        type: string
      - description: Условия выплаты
        in: formData
        name: payoutTerms
        type: string
      - description: ID машины (c8169351-f6d8-4058-af4a-8ead3363fd92)
        in: formData
        name: truckId
        type: string
      - description: Фотографии груза (можно выбрать несколько файлов)
        in: formData
        name: photos
        type: file
      produces:
      - application/json
      responses:
        "200":
          description: Cargo updated
          schema:
            $ref: '#/definitions/cargo.GetResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Update a cargo by ID
      tags:
      - cargo
  /invitation/invite:
    post:
      consumes:
      - application/json
      description: Creates a new invitation with the provided details
      parameters:
      - description: Invitation object to be created
        in: body
        name: invitation
        required: true
        schema:
          $ref: '#/definitions/invitation.CreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Invitation successfully created
          schema:
            $ref: '#/definitions/invitation.CreateResponse'
        "400":
          description: Invalid JSON format
          schema:
            $ref: '#/definitions/invitation.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/invitation.ErrorResponse'
      summary: Create a new invitation
      tags:
      - invitation
  /profile:
    get:
      consumes:
      - application/json
      description: Retrieves user profile information
      produces:
      - application/json
      responses:
        "200":
          description: User profile information
          schema:
            $ref: '#/definitions/auth.ProfileResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
      security:
      - BearerAuth: []
      summary: User profile
      tags:
      - auth
  /truck:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all trucks in the system
      produces:
      - application/json
      responses:
        "201":
          description: List of trucks
          schema:
            $ref: '#/definitions/truck.ListResponse'
        "404":
          description: Trucks not found
          schema:
            $ref: '#/definitions/truck.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all trucks
      tags:
      - truck
    post:
      consumes:
      - application/json
      description: Creates a new truck with the provided details
      parameters:
      - description: Truck object to be created
        in: body
        name: truck
        required: true
        schema:
          $ref: '#/definitions/truck.CreateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: Cargo successfully created
          schema:
            $ref: '#/definitions/cargo.CreateResponse'
        "400":
          description: Invalid JSON format
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Create a new truck
      tags:
      - truck
  /truck/{id}:
    get:
      consumes:
      - application/json
      description: Retrieves a truck by their ID
      parameters:
      - description: Truck ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: Truck found
          schema:
            $ref: '#/definitions/truck.GetResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/truck.ErrorResponse'
        "404":
          description: Truck not found
          schema:
            $ref: '#/definitions/truck.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get a truck by ID
      tags:
      - truck
  /truck/{id}/cargos:
    get:
      consumes:
      - application/json
      description: Retrieves a list of cargos by their truck ID
      parameters:
      - description: Truck ID
        in: path
        name: id
        required: true
        type: string
      - description: Limit number of cargos per page
        in: query
        name: limit
        type: integer
      - description: Page number for pagination
        in: query
        name: page
        type: integer
      produces:
      - application/json
      responses:
        "201":
          description: List of cargos
          schema:
            $ref: '#/definitions/cargo.ListResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
        "404":
          description: Truck not found
          schema:
            $ref: '#/definitions/cargo.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Get a list of cargos by truck ID
      tags:
      - truck
  /users:
    get:
      consumes:
      - application/json
      description: Retrieves a list of all users in the system
      produces:
      - application/json
      responses:
        "201":
          description: List of users
          schema:
            $ref: '#/definitions/user.ListResponse'
        "404":
          description: Users not found
          schema:
            $ref: '#/definitions/user.ErrorResponse'
      security:
      - BearerAuth: []
      summary: List all users
      tags:
      - users
  /users/{id}:
    delete:
      consumes:
      - application/json
      description: Deletes a user by their ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: User deleted
          schema:
            $ref: '#/definitions/user.DeleteResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/user.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/user.ErrorResponse'
      summary: Delete a user by ID
      tags:
      - users
    get:
      consumes:
      - application/json
      description: Retrieves a user by their ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      produces:
      - application/json
      responses:
        "201":
          description: User found
          schema:
            $ref: '#/definitions/user.GetResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/user.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/user.ErrorResponse'
      summary: Get a user by ID
      tags:
      - users
    patch:
      consumes:
      - application/json
      description: Updates a user by their ID
      parameters:
      - description: User ID
        in: path
        name: id
        required: true
        type: string
      - description: User object to be updated
        in: body
        name: user
        required: true
        schema:
          $ref: '#/definitions/user.UpdateRequest'
      produces:
      - application/json
      responses:
        "201":
          description: User updated
          schema:
            $ref: '#/definitions/user.UpdateResponse'
        "400":
          description: Invalid ID
          schema:
            $ref: '#/definitions/user.ErrorResponse'
        "404":
          description: User not found
          schema:
            $ref: '#/definitions/user.ErrorResponse'
      summary: Update a user by ID
      tags:
      - users
  /validate-token:
    post:
      consumes:
      - application/json
      description: Validates an access token
      produces:
      - application/json
      responses:
        "200":
          description: Token is valid
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "401":
          description: Unauthorized
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
        "500":
          description: Internal server error
          schema:
            $ref: '#/definitions/auth.ErrorResponse'
      security:
      - BearerAuth: []
      summary: Validate token
      tags:
      - auth
securityDefinitions:
  BearerAuth:
    description: Bearer token for authenticated requests
    in: header
    name: Authorization
    type: apiKey
swagger: "2.0"
